{
    "info": {
        "name": "last test for backend",
        "_postman_id": "restaurant-api-full-crud",
        "description": "Complete interrelated CRUD flow for Users, Customers, Menus, Orders, Order Items, Payments, Audit Logs",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "item": [
        {
            "name": "Auth",
            "item": [
                {
                    "name": "Admin Login",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{ \"username\": \"admin\", \"password\": \"admin123\" }"
                        },
                        "url": "{{base_url}}/login"
                    }
                },
                {
                    "name": "Cashier Login",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{ \"username\": \"cashier1\", \"password\": \"password123\" }"
                        },
                        "url": "{{base_url}}/login"
                    }
                }
            ]
        },
        {
            "name": "Admin Flow",
            "item": [
                {
                    "name": "Create User",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{admin_token}}"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{ \"name\": \"Cashier 2\", \"username\": \"cashier2\", \"password\": \"password123\", \"role\": \"Cashier\", \"contact_number\": \"09171234569\" }"
                        },
                        "url": "{{base_url}}/users"
                    }
                },
                {
                    "name": "Get Users",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{admin_token}}"
                            }
                        ],
                        "url": "{{base_url}}/users"
                    }
                },
                {
                    "name": "Create Menu",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{admin_token}}"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{ \"name\": \"Cheeseburger\", \"description\": \"Juicy beef patty with cheese\", \"price\": 150.00, \"category\": \"Food\", \"availability_status\": true, \"product_details\": \"Served with fries\" }"
                        },
                        "url": "{{base_url}}/menus"
                    }
                },
                {
                    "name": "Create Customer",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{admin_token}}"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{ \"customer_name\": \"Test Customer\", \"table_number\": \"A1\", \"order_reference\": \"REF123\" }"
                        },
                        "url": "{{base_url}}/customers"
                    }
                }
            ]
        },
        {
            "name": "Cashier Flow",
            "item": [
                {
                    "name": "Create Order",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{cashier_token}}"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{ \"customer_id\": 1, \"handled_by\": 2, \"order_type\": \"dine-in\", \"status\": \"pending\", \"total_amount\": 150.00, \"order_timestamp\": \"2025-08-28T12:00:00\", \"expiry_timestamp\": \"2025-08-28T13:00:00\", \"order_source\": \"QR\" }"
                        },
                        "url": "{{base_url}}/orders"
                    }
                },
                {
                    "name": "Create Order Item",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{cashier_token}}"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{ \"order_id\": 1, \"menu_id\": 1, \"quantity\": 2, \"price\": 150.00 }"
                        },
                        "url": "{{base_url}}/order-items"
                    }
                },
                {
                    "name": "Create Payment",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{cashier_token}}"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{ \"order_id\": 1, \"amount_paid\": 300.00, \"payment_method\": \"cash\", \"payment_status\": \"completed\", \"payment_timestamp\": \"2025-08-28T12:05:00\" }"
                        },
                        "url": "{{base_url}}/payments"
                    }
                }
            ]
        },
        {
            "name": "Audit Logs",
            "item": [
                {
                    "name": "Get All Audit Logs",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{admin_token}}"
                            }
                        ],
                        "url": "{{base_url}}/audit-logs"
                    }
                }
            ]
        }
    ],
    "variable": [
        { "key": "base_url", "value": "http://127.0.0.1:8000/api" },
        { "key": "admin_token", "value": "" },
        { "key": "cashier_token", "value": "" }
    ]
}
